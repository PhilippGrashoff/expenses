{"version":3,"file":"js/atk-vue-multiline.min.js","mappings":"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","sources":["webpack://atk/./src/VueComponent/Share/AtkLookupComponent.js","webpack://atk/./src/VueComponent/Share/AtkDatePickerComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineCellComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineReadonlyComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineTextareaComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineHeaderComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineBodyComponent.js","webpack://atk/./src/VueComponent/Multiline/MultilineRowComponent.js"],"sourcesContent":["/**\n * Wrapper for Fomantic-UI dropdown component into a lookup component.\n *\n * Properties:\n * config:\n * reference: the reference field name associate with model or hasOne name. This field name will be sent along with URL callback parameter as of 'field=name'.\n * Note: The remaining config object may contain any or SuiDropdown { props: value } pair.\n *\n * modelValue: The selected value.\n * optionalValue: The initial list of options for the dropdown.\n */\nexport default {\n    name: 'AtkLookup',\n    template: `\n        <SuiDropdown\n            v-bind=\"dropdownProps\"\n            ref=\"drop\"\n            :modelValue=\"getDropdownValue(modelValue)\"\n            @update:modelValue=\"onUpdate\"\n        ></SuiDropdown>`,\n    props: ['config', 'modelValue', 'optionalValue'],\n    data: function () {\n        const {\n            url, reference, ...otherConfig\n        } = this.config;\n        otherConfig.selection = true;\n\n        return {\n            dropdownProps: otherConfig,\n            url: url || null,\n            field: reference,\n            query: '',\n            temp: '',\n        };\n    },\n    mounted: function () {\n        if (this.optionalValue) {\n            this.dropdownProps.options = Array.isArray(this.optionalValue) ? this.optionalValue : [this.optionalValue];\n        }\n    },\n    emits: ['update:modelValue'],\n    methods: {\n        getDropdownValue: function (value) {\n            return this.dropdownProps.options.find((item) => item.value === value);\n        },\n        onUpdate: function (value) {\n            this.$emit('update:modelValue', value.value);\n        },\n    },\n};\n","/* global flatpickr */ // loaded after main JS\n\n/**\n * Wrapper for vue-flatpickr-component component.\n *\n * https://github.com/ankurk91/vue-flatpickr-component\n *\n * Properties:\n * config: Any of Flatpickr options\n */\nexport default {\n    name: 'AtkDatePicker',\n    template: `\n        <FlatpickrPicker\n            :config=\"flatPickr\"\n            :modelValue=\"getFlatpickrValue(modelValue)\"\n            @update:modelValue=\"onUpdate\"\n        />`,\n    props: ['config', 'modelValue'],\n    data: function () {\n        const config = { ...this.config };\n\n        if (config.defaultDate && !this.modelValue) {\n            config.defaultDate = new Date();\n        } else if (this.modelValue) {\n            config.defaultDate = this.modelValue;\n        }\n\n        if (!config.locale) {\n            config.locale = flatpickr.l10ns.default;\n        }\n\n        return {\n            flatPickr: config,\n        };\n    },\n    emits: ['setDefault'],\n    mounted: function () {\n        // if value is not set but default date is, then emit proper string value to parent\n        if (!this.modelValue && this.flatPickr.defaultDate) {\n            this.onUpdate(\n                this.flatPickr.defaultDate instanceof Date\n                    ? flatpickr.formatDate(this.config.defaultDate, this.config.dateFormat)\n                    : this.flatPickr.defaultDate\n            );\n        }\n    },\n    methods: {\n        getFlatpickrValue: function (value) {\n            return value;\n        },\n        onUpdate: function (value) {\n            this.$emit('update:modelValue', value);\n        },\n    },\n};\n","import MultilineReadonly from './MultilineReadonlyComponent';\nimport MultilineTextarea from './MultilineTextareaComponent';\nimport AtkDatePicker from '../Share/AtkDatePickerComponent';\nimport AtkLookup from '../Share/AtkLookupComponent';\n\nexport default {\n    name: 'AtkMultilineCell',\n    template: `\n        <component\n            :is=\"getComponent()\"\n            v-bind=\"getComponentProps()\"\n            ref=\"cell\"\n            :fluid=\"true\"\n            class=\"fluid\"\n            :name=\"inputName\"\n            v-model=\"inputValue\"\n            @update:modelValue=\"onInput\"\n        ></component>`,\n    components: {\n        AtkMultilineReadonly: MultilineReadonly,\n        AtkMultilineTextarea: MultilineTextarea,\n        AtkDatePicker: AtkDatePicker,\n        AtkLookup: AtkLookup,\n    },\n    props: ['cellData', 'fieldValue'],\n    data: function () {\n        return {\n            fieldName: this.cellData.name,\n            type: this.cellData.type,\n            inputName: '-' + this.cellData.name,\n            inputValue: this.fieldValue,\n        };\n    },\n    emits: ['updateValue'],\n    methods: {\n        getComponent: function () {\n            return this.cellData.definition.component;\n        },\n        getComponentProps: function () {\n            if (this.getComponent() === 'AtkMultilineReadonly') {\n                return { readOnlyValue: this.fieldValue };\n            }\n\n            return this.cellData.definition.componentProps;\n        },\n        onInput: function (value) {\n            this.inputValue = value;\n            this.$emit('updateValue', this.fieldName, this.inputValue);\n        },\n    },\n};\n","/**\n * Simply display a readonly value.\n */\nexport default {\n    name: 'AtkMultilineReadonly',\n    template: '<div>{{readOnlyValue}}</div>',\n    props: ['readOnlyValue'],\n};\n","export default {\n    name: 'AtkMultilineTextarea',\n    template: '<textarea v-model=\"modelValue\" @input=\"onInput\" />',\n    props: ['modelValue'],\n    emits: ['update:modelValue'],\n    methods: {\n        onInput: function (event) {\n            this.$emit('update:modelValue', event.target.value);\n        },\n    },\n};\n","import atk from 'atk';\n\nexport default {\n    name: 'AtkMultilineHeader',\n    template: `\n        <SuiTableHeader>\n            <SuiTableRow v-if=\"hasError()\">\n                <SuiTableCell :style=\"{ background: 'none' }\" />\n                <SuiTableCell :style=\"{ background: 'none' }\"\n                    error=\"true\"\n                    v-for=\"column in filterVisibleColumns(columns)\"\n                    :textAlign=\"getTextAlign(column)\"\n                >\n                    <SuiIcon v-if=\"getErrorMsg(column)\" name=\"attention\" />\n                    {{getErrorMsg(column)}}\n                </SuiTableCell>\n            </SuiTableRow>\n            <SuiTableRow v-if=\"hasCaption()\">\n                <SuiTableHeaderCell :colspan=\"getVisibleColumns()\">{{caption}}</SuiTableHeaderCell>\n            </SuiTableRow>\n            <SuiTableRow :verticalAlign=\"'top'\">\n                <SuiTableHeaderCell :width=1 textAlign=\"center\">\n                    <input ref=\"check\" type=\"checkbox\" :checked=\"isChecked\" :indeterminate=\"isIndeterminate\" @input=\"onToggleDeleteAll\" />\n                </SuiTableHeaderCell>\n                <SuiTableHeaderCell\n                    v-for=\"column in filterVisibleColumns(columns)\"\n                    :width=column.cellProps.width\n                    :textAlign=\"getTextAlign(column)\"\n                >\n                    <div>{{column.caption}}</div>\n                    <div v-if=\"false\" :style=\"{ position: 'absolute', top: '-22px' }\">\n                        <SuiLabel v-if=\"getErrorMsg(column)\" pointing=\"below\" basic color=\"red\">{{getErrorMsg(column)}}</SuiLabel>\n                    </div>\n                </SuiTableHeaderCell>\n            </SuiTableRow>\n        </SuiTableHeader>`,\n    props: ['fields', 'selectionState', 'errors', 'caption'],\n    data: function () {\n        return { columns: this.fields, isDeleteAll: false };\n    },\n    methods: {\n        filterVisibleColumns: function (columns) {\n            return columns.filter((v) => v.isVisible);\n        },\n        onToggleDeleteAll: function () {\n            this.$nextTick(() => {\n                atk.eventBus.emit(this.$root.$el.parentElement.id + '-toggle-delete-all', { isOn: this.$refs.check.checked });\n            });\n        },\n        getTextAlign: function (column) {\n            let align = 'left';\n            if (!column.isEditable) {\n                switch (column.type) {\n                    case 'smallint':\n                    case 'integer':\n                    case 'bigint':\n                    case 'float':\n                    case 'atk4_money': {\n                        align = 'right';\n\n                        break;\n                    }\n                }\n            }\n\n            return align;\n        },\n        getVisibleColumns: function () {\n            let count = 1; // add deletable column;\n            for (const field of this.columns) {\n                count = field.isVisible ? count + 1 : count;\n            }\n\n            return count;\n        },\n        hasError: function () {\n            return Object.keys(this.errors).length > 0;\n        },\n        hasCaption: function () {\n            return this.caption;\n        },\n        getErrorMsg: function (column) {\n            if (this.hasError()) {\n                const rows = Object.keys(this.errors);\n                for (const row of rows) {\n                    const error = this.errors[row].filter((col) => col.name === column.name);\n                    if (error.length > 0) {\n                        return error[0].msg;\n                    }\n                }\n            }\n\n            return null;\n        },\n    },\n    computed: {\n        isIndeterminate: function () {\n            return this.selectionState === 'indeterminate';\n        },\n        isChecked: function () {\n            return this.selectionState === 'on';\n        },\n    },\n};\n","import $ from 'external/jquery';\nimport atk from 'atk';\nimport MultilineBody from './MultilineBodyComponent';\nimport MultilineHeader from './MultilineHeaderComponent';\n\nexport default {\n    name: 'AtkMultiline',\n    template: `\n        <div>\n            <SuiTable v-bind=\"tableProp\">\n                <AtkMultilineHeader\n                    :fields=\"fieldData\"\n                    :selectionState=\"getMainToggleState\"\n                    :errors=\"errors\"\n                    :caption=\"caption\"\n                ></AtkMultilineHeader>\n                <AtkMultilineBody\n                    :fieldDefs=\"fieldData\"\n                    :rowData=\"rowData\"\n                    :deletables=\"getDeletables\"\n                    :errors=\"errors\"\n                    @onTabLastRow=\"onTabLastRow\"\n                ></AtkMultilineBody>\n                <SuiTableFooter>\n                    <SuiTableRow>\n                        <SuiTableHeaderCell />\n                        <SuiTableHeaderCell :colspan=\"getSpan\" textAlign=\"right\">\n                            <SuiButtonGroup>\n                                <SuiButton ref=\"addButton\" size=\"small\" type=\"button\" icon :disabled=\"isLimitReached\" @click.stop.prevent=\"onAdd\">\n                                    <SuiIcon name=\"plus\" />\n                                </SuiButton>\n                                <SuiButton size=\"small\" type=\"button\" icon :disabled=\"isDeleteDisable\" @click.stop.prevent=\"onDelete\">\n                                    <SuiIcon name=\"trash\" />\n                                </SuiButton>\n                            </SuiButtonGroup>\n                        </SuiTableHeaderCell>\n                    </SuiTableRow>\n                </SuiTableFooter>\n            </SuiTable>\n            <div>\n                <input ref=\"atkmlInput\" :form=\"form\" :name=\"name\" type=\"hidden\" :value=\"valueJson\" />\n            </div>\n        </div>`,\n    props: {\n        data: Object,\n    },\n    data: function () {\n        const tableDefault = {\n            basic: false,\n            celled: false,\n            collapsing: false,\n            stackable: false,\n            inverted: false,\n        };\n\n        return {\n            form: this.data.formName,\n            valueJson: this.data.inputValue,\n            name: this.data.inputName,\n            rowData: [],\n            fieldData: this.data.fields || [],\n            eventFields: this.data.eventFields || [],\n            deletables: [],\n            hasChangeCb: this.data.hasChangeCb,\n            errors: {},\n            caption: this.data.caption || null,\n            tableProp: { ...tableDefault, ...this.data.tableProps },\n        };\n    },\n    components: {\n        AtkMultilineHeader: MultilineHeader,\n        AtkMultilineBody: MultilineBody,\n    },\n    mounted: function () {\n        this.rowData = this.buildRowData(this.valueJson ?? '[]');\n        this.updateInputValue();\n\n        atk.eventBus.on(this.$root.$el.parentElement.id + '-update-row', (payload) => {\n            this.onUpdate(payload.rowId, payload.fieldName, payload.value);\n        });\n\n        atk.eventBus.on(this.$root.$el.parentElement.id + '-toggle-delete', (payload) => {\n            const i = this.deletables.indexOf(payload.rowId);\n            if (i !== -1) {\n                this.deletables.splice(i, 1);\n            } else {\n                this.deletables.push(payload.rowId);\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.parentElement.id + '-toggle-delete-all', (payload) => {\n            this.deletables = [];\n            if (payload.isOn) {\n                for (const row of this.rowData) {\n                    this.deletables.push(row.__atkml);\n                }\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.parentElement.id + '-multiline-rows-error', (payload) => {\n            this.errors = { ...payload.errors };\n        });\n    },\n    methods: {\n        onTabLastRow: function () {\n            if (!this.isLimitReached && this.data.addOnTab) {\n                this.onAdd();\n            }\n        },\n        onAdd: function () {\n            const newRow = this.createRow(this.data.fields);\n            this.rowData.push(newRow);\n            this.updateInputValue();\n            if (this.data.afterAdd && typeof this.data.afterAdd === 'function') {\n                this.data.afterAdd(JSON.parse(this.valueJson));\n            }\n            this.fetchExpression(newRow.__atkml);\n            this.fetchOnUpdateAction();\n        },\n        onDelete: function () {\n            for (const atkmlId of this.deletables) {\n                this.deleteRow(atkmlId);\n            }\n            this.deletables = [];\n            this.updateInputValue();\n            this.fetchOnUpdateAction();\n            if (this.data.afterDelete && typeof this.data.afterDelete === 'function') {\n                this.data.afterDelete(JSON.parse(this.valueJson));\n            }\n        },\n        onUpdate: function (atkmlId, fieldName, value) {\n            this.updateFieldInRow(atkmlId, fieldName, value);\n            this.clearError(atkmlId, fieldName);\n            this.updateInputValue();\n\n            if (!this.onUpdate.debouncedFx) {\n                this.onUpdate.debouncedFx = atk.createDebouncedFx(() => {\n                    this.onUpdate.debouncedFx = null;\n                    this.fetchExpression(atkmlId);\n                    this.fetchOnUpdateAction(fieldName);\n                }, 250);\n            }\n            this.onUpdate.debouncedFx.call(this);\n        },\n        /**\n         * Creates a new row of data and\n         * set values to default if available.\n         */\n        createRow: function (fields) {\n            const row = {};\n            for (const field of fields) {\n                row[field.name] = field.default;\n            }\n            row.__atkml = this.getUUID();\n\n            return row;\n        },\n        deleteRow: function (atkmlId) {\n            this.rowData.splice(this.rowData.findIndex((row) => row.__atkml === atkmlId), 1);\n            delete this.errors[atkmlId];\n        },\n        /**\n         * Update the value of the field in rowData.\n         */\n        updateFieldInRow: function (atkmlId, fieldName, value) {\n            for (const row of this.rowData) {\n                if (row.__atkml === atkmlId) {\n                    row[fieldName] = value;\n                }\n            }\n        },\n        clearError: function (atkmlId, fieldName) {\n            if (atkmlId in this.errors) {\n                const errors = this.errors[atkmlId].filter((error) => error.name !== fieldName);\n                this.errors[atkmlId] = [...errors];\n                if (errors.length === 0) {\n                    delete this.errors[atkmlId];\n                }\n            }\n        },\n        /**\n         * Update Multi-line Form input with all rowData values\n         * as JSON string.\n         */\n        updateInputValue: function () {\n            this.valueJson = JSON.stringify(this.rowData);\n        },\n        /**\n         * Build rowData from JSON string.\n         */\n        buildRowData: function (jsonValue) {\n            const rows = JSON.parse(jsonValue);\n            for (const row of rows) {\n                row.__atkml = this.getUUID();\n            }\n\n            return rows;\n        },\n        /**\n         * Check if one of the field use expression.\n         */\n        hasExpression: function () {\n            return this.fieldData.some((field) => field.isExpr);\n        },\n        /**\n         * Send on change action to server.\n         */\n        fetchOnUpdateAction: function (fieldName = null) {\n            if (this.hasChangeCb && (fieldName === null || this.eventFields.includes(fieldName))) {\n                $(this.$refs.addButton.$el).api({\n                    on: 'now',\n                    url: this.data.url,\n                    method: 'POST',\n                    data: { __atkml_action: 'on-change', rows: this.valueJson },\n                });\n            }\n        },\n        postData: async function (row) {\n            const data = { ...row };\n            const context = this.$refs.addButton.$el;\n            data.__atkml_action = 'update-row';\n            try {\n                return await atk.apiService.suiFetch(this.data.url, { data: data, method: 'POST', stateContext: context });\n            } catch (e) {\n                console.error(e);\n            }\n        },\n        /**\n         * Get expressions values from server.\n         */\n        fetchExpression: async function (atkmlId) {\n            if (this.hasExpression()) {\n                const row = this.findRow(atkmlId);\n                // server will return expression field/value if defined\n                if (row) {\n                    const resp = await this.postData(row);\n                    if (resp.expressions) {\n                        const fields = Object.keys(resp.expressions);\n                        for (const field of fields) {\n                            this.updateFieldInRow(atkmlId, field, resp.expressions[field]);\n                        }\n                        this.updateInputValue();\n                    }\n                }\n            }\n        },\n        findRow: function (atkmlId) {\n            return this.rowData.find((row) => row.__atkml === atkmlId);\n        },\n        getInputElement: function () {\n            return this.$refs.atkmlInput;\n        },\n        /**\n         * UUID v4 generator.\n         */\n        getUUID: function () {\n            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replaceAll(/[xy]/g, (c) => {\n                const r = Math.floor(Math.random() * 16);\n                const v = c === 'x' ? r : r & (0x3 | 0x8); // eslint-disable-line no-bitwise\n\n                return v.toString(16);\n            });\n        },\n    },\n    computed: {\n        getSpan: function () {\n            return this.fieldData.length - 1;\n        },\n        getDeletables: function () {\n            return this.deletables;\n        },\n        /**\n         * Return Delete all checkbox state base on\n         * deletables entries.\n         */\n        getMainToggleState: function () {\n            let res = 'off';\n            if (this.deletables.length > 0) {\n                res = this.deletables.length === this.rowData.length\n                    ? 'on'\n                    : 'indeterminate';\n            }\n\n            return res;\n        },\n        isDeleteDisable: function () {\n            return this.deletables.length === 0;\n        },\n        isLimitReached: function () {\n            if (this.data.rowLimit === 0) {\n                return false;\n            }\n\n            return this.data.rowLimit < this.rowData.length + 1;\n        },\n    },\n};\n","import MultilineRow from './MultilineRowComponent';\n\nexport default {\n    name: 'AtkMultilineBody',\n    template: `\n        <SuiTableBody>\n            <AtkMultilineRow\n                :fields=\"fields\"\n                v-for=\"(row, i) in rows\" :key=\"row.__atkml\"\n                :rowId=\"row.__atkml\"\n                :isDeletable=\"isDeletableRow(row)\"\n                :rowValues=\"row\"\n                :errors=\"getRowErrors(row.__atkml)\"\n                @onTabLastColumn=\"onTabLastColumn(i)\"\n            ></AtkMultilineRow>\n        </SuiTableBody>`,\n    props: ['fieldDefs', 'rowData', 'deletables', 'errors'],\n    data: function () {\n        return { fields: this.fieldDefs };\n    },\n    created: function () {},\n    components: {\n        AtkMultilineRow: MultilineRow,\n    },\n    computed: {\n        rows: function () {\n            return this.rowData;\n        },\n    },\n    emits: ['onTabLastRow'],\n    methods: {\n        onTabLastColumn: function (rowIndex) {\n            if (rowIndex + 1 === this.rowData.length) {\n                this.$emit('onTabLastRow');\n            }\n        },\n        isDeletableRow: function (row) {\n            return this.deletables.includes(row.__atkml);\n        },\n        getRowErrors: function (rowId) {\n            return this.errors[rowId] ?? [];\n        },\n    },\n};\n","import atk from 'atk';\nimport MultilineCell from './MultilineCellComponent';\n\n/**\n * This will create a table td element using SuiTableCell.\n * The td element is created only if column as set isVisible = true.\n * The td element will add a multiline cell element.\n * The multiline cell will set it's own template component depending on the fieldType.\n */\nexport default {\n    name: 'AtkMultilineRow',\n    template: `\n        <SuiTableRow :verticalAlign=\"'middle'\">\n            <SuiTableCell textAlign=\"center\">\n                <input type=\"checkbox\" v-model=\"toDelete\" @input=\"onToggleDelete\" />\n            </SuiTableCell>\n            <SuiTableCell\n                v-for=\"(column, i) in filterVisibleColumns(columns)\"\n                v-bind=\"column.cellProps\"\n                :width=null\n                :error=\"hasColumnError(column)\"\n                :style=\"{ overflow: 'visible' }\"\n                @keydown.tab=\"onTab(i)\"\n            >\n                <AtkMultilineCell\n                    :cellData=\"column\"\n                    :fieldValue=\"getValue(column)\"\n                    @updateValue=\"onUpdateValue\"\n                ></AtkMultilineCell>\n            </SuiTableCell>\n        </SuiTableRow>`,\n    props: ['fields', 'rowId', 'isDeletable', 'rowValues', 'errors'],\n    data: function () {\n        return { columns: this.fields };\n    },\n    components: {\n        AtkMultilineCell: MultilineCell,\n    },\n    computed: {\n        /**\n         * toDelete is bind by v-model, thus we need a setter for\n         * computed property to work.\n         * When isDeletable is pass, will set checkbox according to it's value.\n         */\n        toDelete: {\n            get: function () {\n                return this.isDeletable;\n            },\n            set: function (v) {\n                return v;\n            },\n        },\n    },\n    emits: ['onTabLastColumn'],\n    methods: {\n        filterVisibleColumns: function (columns) {\n            return columns.filter((v) => v.isVisible);\n        },\n        onTab: function (columnIndex) {\n            if (columnIndex === this.columns.filter((column) => column.isEditable).length - 1) {\n                this.$emit('onTabLastColumn');\n            }\n        },\n        hasColumnError: function (column) {\n            return this.errors.some((v) => column.name === v.name);\n        },\n        onToggleDelete: function (e) {\n            atk.eventBus.emit(this.$root.$el.parentElement.id + '-toggle-delete', { rowId: this.rowId });\n        },\n        onUpdateValue: function (fieldName, value) {\n            atk.eventBus.emit(this.$root.$el.parentElement.id + '-update-row', { rowId: this.rowId, fieldName: fieldName, value: value });\n        },\n        getValue: function (column) {\n            return this.rowValues[column.name] || column.default;\n        },\n    },\n};\n"],"names":["name","template","props","data","url","reference","otherConfig","this","config","selection","dropdownProps","field","query","temp","mounted","optionalValue","options","Array","isArray","emits","methods","getDropdownValue","value","find","item","onUpdate","$emit","defaultDate","modelValue","Date","locale","flatpickr","l10ns","default","flatPickr","formatDate","dateFormat","getFlatpickrValue","components","AtkMultilineReadonly","AtkMultilineTextarea","onInput","event","target","AtkDatePicker","AtkLookup","fieldName","cellData","type","inputName","inputValue","fieldValue","getComponent","definition","component","getComponentProps","readOnlyValue","componentProps","columns","fields","isDeleteAll","filterVisibleColumns","filter","v","isVisible","onToggleDeleteAll","$nextTick","atk","eventBus","emit","$root","$el","parentElement","id","isOn","$refs","check","checked","getTextAlign","column","align","isEditable","getVisibleColumns","count","hasError","Object","keys","errors","length","hasCaption","caption","getErrorMsg","rows","row","error","col","msg","computed","isIndeterminate","selectionState","isChecked","form","formName","valueJson","rowData","fieldData","eventFields","deletables","hasChangeCb","tableProp","basic","celled","collapsing","stackable","inverted","tableProps","AtkMultilineHeader","MultilineHeader","AtkMultilineBody","fieldDefs","created","AtkMultilineRow","AtkMultilineCell","MultilineCell","toDelete","get","isDeletable","set","onTab","columnIndex","hasColumnError","some","onToggleDelete","e","rowId","onUpdateValue","getValue","rowValues","onTabLastColumn","rowIndex","isDeletableRow","includes","__atkml","getRowErrors","buildRowData","updateInputValue","on","payload","i","indexOf","splice","push","onTabLastRow","isLimitReached","addOnTab","onAdd","newRow","createRow","afterAdd","JSON","parse","fetchExpression","fetchOnUpdateAction","onDelete","atkmlId","deleteRow","afterDelete","updateFieldInRow","clearError","debouncedFx","createDebouncedFx","call","getUUID","findIndex","stringify","jsonValue","hasExpression","isExpr","arguments","undefined","$","addButton","api","method","__atkml_action","postData","async","context","apiService","suiFetch","stateContext","console","findRow","resp","expressions","getInputElement","atkmlInput","replaceAll","c","r","Math","floor","random","toString","getSpan","getDeletables","getMainToggleState","res","isDeleteDisable","rowLimit"],"sourceRoot":""}